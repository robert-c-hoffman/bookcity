<div class="mx-auto max-w-2xl">
  <h1 class="font-bold text-4xl mb-8">Upload Details</h1>

  <div class="bg-white shadow rounded-lg divide-y divide-gray-200">
    <div class="px-6 py-4">
      <h3 class="text-sm font-medium text-gray-500">Original Filename</h3>
      <p class="mt-1 text-lg text-gray-900"><%= @upload.original_filename %></p>
    </div>

    <div class="px-6 py-4">
      <h3 class="text-sm font-medium text-gray-500">Status</h3>
      <div class="mt-1"><%= render_upload_status(@upload) %></div>
      <% if @upload.error_message.present? %>
        <p class="mt-2 text-sm text-red-600"><%= @upload.error_message %></p>
      <% end %>
    </div>

    <div class="px-6 py-4 grid grid-cols-2 gap-4">
      <div>
        <h3 class="text-sm font-medium text-gray-500">File Size</h3>
        <p class="mt-1 text-gray-900"><%= number_to_human_size(@upload.file_size) if @upload.file_size %></p>
      </div>
      <div>
        <h3 class="text-sm font-medium text-gray-500">Book Type</h3>
        <p class="mt-1 text-gray-900"><%= @upload.book_type&.humanize || "Pending" %></p>
      </div>
    </div>

    <div class="px-6 py-4">
      <h3 class="text-sm font-medium text-gray-500">Parsed Information</h3>
      <% if @upload.parsed_title.present? %>
        <p class="mt-1 text-gray-900">
          <strong><%= @upload.parsed_title %></strong>
          by <%= @upload.parsed_author || "Unknown Author" %>
        </p>
        <p class="mt-1 text-sm text-gray-500">
          Match confidence: <%= @upload.match_confidence %>%
        </p>
      <% else %>
        <p class="mt-1 text-gray-500">Not yet parsed</p>
      <% end %>
    </div>

    <% if @upload.book %>
      <div class="px-6 py-4">
        <h3 class="text-sm font-medium text-gray-500">Matched Book</h3>
        <p class="mt-1">
          <span class="text-gray-900"><%= @upload.book.display_name %></span>
          <% if @upload.book.acquired? %>
            <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800">
              Acquired
            </span>
          <% end %>
        </p>
      </div>
    <% end %>

    <div class="px-6 py-4">
      <h3 class="text-sm font-medium text-gray-500">Uploaded</h3>
      <p class="mt-1 text-gray-900">
        <%= time_ago_in_words(@upload.created_at) %> ago
        by <%= @upload.user.name %>
      </p>
    </div>

    <% if @upload.processed_at %>
      <div class="px-6 py-4">
        <h3 class="text-sm font-medium text-gray-500">Processed</h3>
        <p class="mt-1 text-gray-900"><%= time_ago_in_words(@upload.processed_at) %> ago</p>
      </div>
    <% end %>
  </div>

  <div class="mt-6 flex gap-4">
    <%= link_to "Back to Uploads", admin_uploads_path, class: "text-gray-600 hover:text-gray-900" %>
    <% if @upload.failed? %>
      <%= button_to "Retry", retry_admin_upload_path(@upload), method: :post,
          class: "text-green-600 hover:text-green-800" %>
    <% end %>
    <%= button_to "Delete", admin_upload_path(@upload), method: :delete,
        data: { turbo_confirm: "Are you sure you want to delete this upload?" },
        class: "text-red-600 hover:text-red-800" %>
  </div>
</div>
